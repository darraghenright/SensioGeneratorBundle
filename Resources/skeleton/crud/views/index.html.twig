{{ "{% extends '::base.html.twig' %}" }}

{{ "{% block stylesheets %}" }}
    {{ '{{ parent() }}' }}
    <link rel="stylesheet" type="text/css" media="all" href="{{ "{{ asset('bundles/sensiogenerator/crud/css/style.css') }}" }}" />
{{ '{% endblock %}' }}

{{ "{% block body %}" }}

    <h2>{{ entity }} list</h1>
    
    <table id="{{ entity|lower }}_list" class="records_list">
        <thead>
            <tr>
            {%- for field, metadata in fields %}
    
                <th>
                {{ '{% if sort %}' }}
                    <a {{ '{% if "'~ field ~'" == sort.column %}class="sort_{{ sort.order }}"{% endif %}' }} href="{{ "{{ path('"~ route_name_prefix ~"', { 'sort': '"~ field ~"', 'sort_order': sort."~ field ~" }) }}"}}">{{ field }}</a>
                {{ '{% else %}' }}
                    <a href="{{ "{{ path('"~ route_name_prefix ~"', { 'sort': '"~ field ~"', 'sort_order': 'asc' }) }}"}}">{{ field }}</a>
                {{ '{% endif %}' }}
                </th>
    
            {%- endfor %}
    
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
        {{ '{% for rowCount, entity in entities %}' }}
            <tr class="{{ "{{ cycle(['odd', 'even'], rowCount) }}" }}">
    
        {%- for field, metadata in fields %}
            {%- if loop.first and ('show' in actions) %}
    
                <td><a href="{{ "{{ path('"~ route_name_prefix ~"_show', { 'id': entity.id }) }}" }}">{{ '{{ entity.'~ field|replace({'_': ''}) ~' }}' }}</a></td>
    
            {%- elseif metadata.type in ['date', 'datetime'] %}
    
                <td>{{ '{% if entity.'~ field|replace({'_': ''}) ~' %}{{ entity.'~ field|replace({'_': ''}) ~'|date(\'Y-m-d H:i:s\') }}{% endif%}' }}</td>
    
            {%- else %}
    
                <td>{{ '{{ entity.'~ field|replace({'_': ''}) ~' }}' }}</td>
    
            {%- endif %}
    
            {%- if loop.last %}
    
                <td>
                    {%- include "views/others/actions.html.twig" %}
                </td>
    
            {%- endif %}
        {%- endfor %}
    
            </tr>
        {{ '{% endfor %}' }}
        </tbody>
    </table>
    
    {{ '{% if pages > 1 %}' }}
        <ul id="pager">
        {{ '{% for i in range(1, pages) %}' }}
            <li>
            {{ '{% if sort %}' }}
                <a href="{{ "{{ path('"~ route_name_prefix ~"', { 'page': i, 'sort': sort.column, 'sort_order': sort.order }) }}" }}">{{ '{{ i }}' }}</a>
            {{ '{% else %}' }}
                <a href="{{ "{{ path('"~ route_name_prefix ~"', { 'page': i }) }}" }}">{{ '{{ i }}' }}</a>
            {{ '{% endif %}' }}
            </li>
        {{ '{% endfor %}' }}
        </ul>
    {{ '{% endif %}' }}
    
    
    {% if 'new' in actions %}
    <ul class="record_actions">
        <li class="record_new">
            <a href="{{ "{{ path('"~ route_name_prefix ~"_new') }}" }}">
                Create a new entry
            </a>
        </li>
    </ul>
    {% endif %}

{{ "{% endblock %}" }}
